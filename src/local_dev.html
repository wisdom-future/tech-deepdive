<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€æœ¯æ´å¯Ÿå¼•æ“</title>
    <!-- <base target="_top"> -->

    <!-- =================================================================== -->
    <!-- 1. å¤–éƒ¨åº“åŠ è½½ (JS) - JS åº“çš„åŠ è½½é¡ºåºé€šå¸¸ä¸å¤ªå— CSS å½±å“ï¼Œä½†ä¸ºäº†ç»“æ„æ¸…æ™°ï¼Œä»ä¿æŒåœ¨ CSS ä¹‹å‰ -->
    <!-- =================================================================== -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.0.0/dist/markdown-it.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- 3D æ¸²æŸ“åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three-spritetext@1.8.1/dist/three-spritetext.min.js"></script>

    <!-- =================================================================== -->
    <!-- 2. Tailwind CSS é…ç½® (å¿…é¡»åœ¨æ‰€æœ‰ä½¿ç”¨ Tailwind ç±»ä¹‹å‰)                -->
    <!-- =================================================================== -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0052ff',
                        secondary: '#6c757d',
                        success: '#28a745',
                        warning: '#ffc107',
                        error: '#dc3545',
                        info: '#17a2b8',
                        
                        'bg-deep-dark': '#0D1117',
                        'bg-dark': '#161B22',
                        'bg-soft-dark': '#21262d',
                        'border-dark': '#30363d',
                        
                        'text-light': '#c9d1d9',
                        'text-medium': '#8b949e',
                        'text-dark': '#6e7681',
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 4px 15px rgba(0,0,0,0.2)',
                        'card-hover': '0 6px 20px rgba(0,0,0,0.3)',
                        'glow-primary': '0 0 15px rgba(0, 82, 255, 0.6), 0 0 25px rgba(0, 82, 255, 0.4)',
                        'glow-active-tab': '0 0 8px rgba(0, 82, 255, 0.8), 0 0 15px rgba(0, 82, 255, 0.5)',
                    }
                },
            }
        }
    </script>

    <!-- =================================================================== -->
    <!-- 3. è‡ªå®šä¹‰æ ·å¼ç³»ç»Ÿ - CSS æ–‡ä»¶åŠ è½½é¡ºåºéå¸¸é‡è¦                         -->
    <!-- =================================================================== -->
    
    <!-- 3.1. åŸå­å·¥å…·ç±»å®šä¹‰ (é€šè¿‡ @apply) - è¿™äº›æ ·å¼ä¼šç›´æ¥è½¬æ¢ä¸º CSS -->
    <style type="text/tailwindcss">
        @layer components {
            .panel {
                @apply bg-bg-dark border border-border-dark rounded-xl shadow-card;
            }
            .interactive-panel {
                @apply panel transition-all duration-300 hover:border-primary hover:shadow-glow-primary;
            }
            .input-dark {
                @apply w-full bg-bg-soft-dark border border-border-dark rounded-lg px-4 py-2 text-text-light placeholder-text-dark focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-colors;
            }
            .btn-primary {
                @apply px-6 py-2 bg-primary text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100;
            }
            .btn-secondary {
                @apply px-4 py-2 bg-bg-soft-dark text-text-light rounded-md hover:bg-gray-700 transition;
            }
        }
        @layer utilities {
            .content-auto { content-visibility: auto; }
            .transition-default { @apply transition-all duration-300 ease-in-out; }
            
            .badge { @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium; }
            .badge-success { @apply bg-green-800/50 text-green-200; }
            .badge-inactive { @apply bg-gray-700 text-gray-300; }
            .badge-danger { @apply bg-red-800/50 text-red-200; }
        }
    </style>
    
    <!-- 3.2. å…¨å±€æ ·å¼å’Œç¬¬ä¸‰æ–¹åº“è¦†ç›– - è¿™äº›æ ·å¼ä¼šç›´æ¥è½¬æ¢ä¸º CSS -->
    <style>
        /* --- å…¨å±€æ ·å¼ --- */
        :root {
            --header-height: 80px;
        }
        
        body {
            background-color: #0D1117;
            color: #c9d1d9;
            line-height: 1.6;
        }

        html { scroll-behavior: smooth; }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #161B22; }
        ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #8b949e; }

        /* éª¨æ¶å±åŠ¨ç”» */
        @keyframes shimmer { 0% { background-position: -1000px 0 } 100% { background-position: 1000px 0 } }
        .skeleton { background: linear-gradient(to right, #21262d 4%, #30363d 25%, #21262d 36%); background-size: 1000px 100%; animation: shimmer 1.5s infinite linear; }
        
        /* éšè—æœªæ¿€æ´»çš„Tabå†…å®¹ */
        .explore-tab-content.hidden, .analysis-tab-content.hidden, .system-tab-content.hidden { display: none; }
        
        .tom-select-custom .ts-control {
            background-color: #f9fafb; /* bg-gray-50 */
            border: 1px solid #d1d5db;   /* border-gray-300 */
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
        }
        .tom-select-custom .ts-control input {
            color: #111827; /* text-gray-900 */
        }
        .tom-select-custom .ts-control input::placeholder {
            color: #6b7280; /* text-gray-500 */
        }
        .tom-select-custom .ts-dropdown {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            z-index: 100;
            margin-top: 4px;
        }
        .tom-select-custom .ts-dropdown .option {
            padding: 0.6rem 1rem;
            color: #374151; /* text-gray-700 */
        }
        .tom-select-custom .ts-dropdown .option:hover, 
        .tom-select-custom .ts-dropdown .active {
            background-color: #0052ff; /* primary */
            color: #ffffff;
        }
        .tom-select-custom .ts-control .item {
            background: #0052ff;
            color: #ffffff;
            border-radius: 9999px;
            font-size: 13px;
            font-weight: 500;
            margin: 2px 4px 2px 0;
            padding: 5px 12px;
        }
        .tom-select-custom .ts-control .remove {
            color: #a5b4fc;
            margin-left: 6px;
        }

        /* æ·±è‰²æ¨¡å¼ä¸‹çš„è¦†ç›–æ ·å¼ */
        .dark .tom-select-custom .ts-control {
            background-color: #21262d; /* bg-soft-dark */
            border-color: #30363d;     /* border-dark */
        }
        .dark .tom-select-custom .ts-control input {
            color: #c9d1d9; /* text-light */
        }
        .dark .tom-select-custom .ts-control input::placeholder {
            color: #6e7681; /* text-dark */
        }
        .dark .tom-select-custom .ts-dropdown {
            background-color: #161B22; /* bg-dark */
            border-color: #30363d;     /* border-dark */
        }
        .dark .tom-select-custom .ts-dropdown .option {
            color: #c9d1d9; /* text-light */
        }

        /* **** æ–°å¢ï¼šä¸ºæˆæœä¸­å¿ƒå·¦ä¾§å¯¼èˆªå®šä¹‰æ ·å¼ **** */
        .findings-nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            color: #8b949e;
            transition: background-color 0.2s, color 0.2s;
        }
        .findings-nav-link:hover {
            background-color: #21262d;
            color: #c9d1d9;
        }
        .findings-nav-link.active {
            background-color: #0052ff;
            color: #ffffff;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 82, 255, 0.3);
        }

        /* --- æ–°å¢ï¼šæµ…è‰²ä¸»é¢˜ ("ç™½çº¸é»‘å­—") æ ·å¼ --- */
        /* å½“ <html> æ ‡ç­¾æœ‰ 'light' ç±»æ—¶ï¼Œè¿™äº›æ ·å¼ä¼šç”Ÿæ•ˆ */
        .light body {
            background-color: #ffffff; /* ç™½è‰²èƒŒæ™¯ */
            color: #111827;           /* æ·±ç°è‰²æ–‡å­— (bg-gray-900) */
        }
        .light .panel, .light .interactive-panel {
            background-color: #f9fafb; /* bg-gray-50 */
            border-color: #e5e7eb;   /* border-gray-200 */
        }
        .light .input-dark {
            background-color: #f3f4f6; /* bg-gray-100 */
            border-color: #d1d5db;   /* border-gray-300 */
            color: #111827;
        }
        .light .input-dark::placeholder {
            color: #6b7280; /* text-gray-500 */
        }
        .light .text-text-light { color: #1f2937; } /* text-gray-800 */
        .light .text-text-medium { color: #4b5563; } /* text-gray-600 */
        .light .text-text-dark { color: #6b7280; } /* text-gray-500 */

        /* ä¿®æ­£å¯¼èˆªæ åœ¨æµ…è‰²æ¨¡å¼ä¸‹çš„æ–‡å­—é¢œè‰² */
        .light #theme-toggle-btn, .light #user-display-name {
            color: #1f2937; /* æ·±è‰²æ–‡å­—ä»¥åœ¨æµ…è‰²èƒŒæ™¯ä¸‹å¯è§ */
            /* æˆ–è€…ä¿æŒç™½è‰²ï¼Œå¦‚æœæ‚¨çš„å¯¼èˆªæ èƒŒæ™¯åœ¨æµ…è‰²æ¨¡å¼ä¸‹ä»ç„¶æ˜¯æ·±è‰²çš„ */
        }
    </style>

    <!-- æ ¸å¿ƒ CSS åº“ (Font Awesome å¯ä»¥åœ¨è¿™é‡Œ) -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- !!! TomSelect çš„ CSS å¿…é¡»åœ¨æ‰€æœ‰è‡ªå®šä¹‰ <style> æ ‡ç­¾ä¹‹å !!! -->
    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.default.min.css" rel="stylesheet">

</head>
<body class="text-gray-200"> <!-- è°ƒæ•´ body é»˜è®¤æ–‡å­—é¢œè‰² -->
  <!-- å¯¼èˆªæ  -->
   <header class="fixed top-0 left-0 w-full h-auto md:h-[var(--header-height)] bg-navDark border-b border-gray-800/20 flex flex-row items-center px-4 md:px-6 py-2 md:py-0 z-50 shadow-lg bg-[url('https://media.istockphoto.com/id/153948983/photo/swimmer-diving-after-the-jump-underwater-view.jpg?s=1024x1024&w=is&k=20&c=MI1DyHT47zouV_vFmobsayuie3py-ltW_HufxX2aptM=')] bg-cover bg-center bg-blend-overlay bg-navDark/80">
    <!-- Logo -->
    <div class="w-full md:w-auto flex justify-between items-center">
      <div class="logo text-white font-bold text-2xl tracking-wide text-shadow-md">
        Deepdive Engine
      </div>
      <!-- ç§»åŠ¨ç«¯æ±‰å ¡èœå•æŒ‰é’® (ä¿æŒä¸å˜) -->
      <button id="hamburger-menu-btn" class="text-white text-2xl p-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-600 md:hidden">
        <i class="fa fa-bars"></i>
      </button>
    </div>
    
    <!-- å¯¼èˆªèœå• -->
    <nav id="main-nav" class="w-full md:w-auto hidden md:flex flex-wrap justify-center md:justify-start items-center gap-x-2 gap-y-2 mt-2 md:mt-0 md:ml-10">
      <a href="#" class="nav-link text-white px-4 py-2 rounded-lg font-medium transition-all hover:bg-white/20 text-lg flex items-center" data-page="home">
        <i class="fa fa-dashboard mr-2"></i>Dashboard
      </a>
      <a href="#" class="nav-link text-white px-4 py-2 rounded-lg font-medium transition-all hover:bg-white/20 text-lg flex items-center" data-page="exploration">
        <i class="fa fa-database mr-2"></i>Exploration
      </a>
      <a href="#" class="nav-link text-white px-4 py-2 rounded-lg font-medium transition-all hover:bg-white/20 text-lg flex items-center" data-page="analysis">
        <i class="fa fa-lightbulb-o mr-2"></i>Analysis
      </a>
      <a href="#" class="nav-link text-white px-4 py-2 rounded-lg font-medium transition-all hover:bg-white/20 text-lg flex items-center" data-page="findings">
        <i class="fa fa-file-text-o mr-2"></i>Findings
      </a>
      <a href="#" class="nav-link text-white px-4 py-2 rounded-lg font-medium transition-all hover:bg-white/20 text-lg flex items-center" data-page="copilot">
        <i class="fa fa-cogs mr-2"></i>AI-Copilot
      </a>
      <a href="#" class="nav-link text-white px-4 py-2 rounded-lg font-medium transition-all hover:bg-white/20 text-lg flex items-center" data-page="system">
        <i class="fa fa-gears mr-2"></i>System
      </a>
    </nav>

    <div class="flex items-center ml-auto space-x-2" style="gap:10px;">
      <!-- ç”¨æˆ·å -->
      <div id="user-display-name" class="text-white text-sm sm:block"></div>
    </div>
  </header>

  <!-- 2. ä¸»å†…å®¹åŒºåŸŸ -->
  <main id="main-content" class="pt-[var(--header-height)]">
    <!-- åˆå§‹åŠ è½½åŠ¨ç”» -->
    <div id="loader" class="flex flex-col justify-center items-center h-[calc(100vh-var(--header-height)-60px)] text-gray-500 text-lg">
      <div class="spinner border-4 border-gray-200 border-l-primary w-10 h-10 rounded-full animate-spin mb-4"></div>
      <p>æ­£åœ¨åˆå§‹åŒ–...</p>
    </div>

    <div id="page-content-wrapper" class="hidden ...">
      <div id="page-home" class="page-container hidden">
        <section id="module-marketRadar"></section>
        <section id="module-athenasBriefing"></section>
        <section id="module-emergingSignals"></section>
        <section id="module-myWatchlist"></section>
        <section id="module-techFeed"></section>
     </div>

      <div id="page-exploration" class="page-container hidden">
        <!-- Tab Navigation -->
        <div class="border-b border-gray-700 sticky top-[var(--header-height)] z-30 bg-gray-900/80">
          <div id="explore-tabs" class="flex border-b border-gray-700">
            <!-- ğŸŒŒ å…¨åŸŸæ˜Ÿå›¾ (Galaxy Map) -->
            <a href="#" data-tab="galaxy" class="explore-tab-link px-6 py-4 font-bold text-base border-b-2 border-transparent active">
              <i class="fa fa-globe mr-2"></i> ğŸŒŒ å…¨åŸŸæ˜Ÿå›¾
            </a>
            <!-- ğŸ§¬ ä¸»é¢˜ä¿¡æ¯æµ (Topic Feeds) -->
            <a href="#" data-tab="feeds" class="explore-tab-link px-6 py-4 font-bold text-base border-b-2 border-transparent text-gray-300">
              <i class="fa fa-rss mr-2"></i> ğŸ§¬ ä¸»é¢˜ä¿¡æ¯æµ
            </a>
            <!-- ğŸ”¬ å®ä½“æµè§ˆå™¨ (Entity Explorer) -->
            <a href="#" data-tab="explorer" class="explore-tab-link px-6 py-4 font-bold text-base border-b-2 border-transparent text-gray-300">
              <i class="fa fa-cubes mr-2"></i> ğŸ”¬ å®ä½“æµè§ˆå™¨
            </a>
          </div>
        </div>

        <!-- Tab Content Panels -->
        <!-- ğŸŒŒ å…¨åŸŸæ˜Ÿå›¾ å†…å®¹é¢æ¿ -->
        <div id="explore-galaxy-content" class="explore-tab-content p-4 md:p-6 lg:p-8 bg-transparent">
          <div id="spacetime-container" class="relative w-full h-[calc(100vh-var(--header-height)-120px)] bg-gray-900/50 rounded-xl shadow-lg border border-gray-700">
            <button id="galaxy-back-btn" class="absolute top-4 left-4 bg-gray-700/50 text-white px-4 py-2 rounded-lg hover:bg-primary transition-colors hidden z-10">
              <i class="fa fa-arrow-left mr-2"></i>è¿”å›æ˜Ÿç³»è§†å›¾
            </button>
            <div class="absolute inset-0 flex items-center justify-center text-gray-400 text-lg">
              <i class="fa fa-spinner fa-spin mr-3"></i> æ­£åœ¨åŠ è½½å…¨åŸŸæ˜Ÿå›¾...
            </div>
            <div id="spacetime-tooltip" class="absolute bg-black/70 text-white text-xs p-2 rounded shadow-lg hidden pointer-events-none z-50"></div>
          </div>
        </div>

        <!-- ğŸ§¬ ä¸»é¢˜ä¿¡æ¯æµ å†…å®¹é¢æ¿ -->
        <div id="explore-feeds-content" class="explore-tab-content hidden p-4 md:p-6 lg:p-8 bg-transparent">
          <div class="flex flex-col lg:flex-row gap-6 h-full">
            <!-- ä¸»é¢˜é€‰æ‹©å™¨ -->
            <div class="lg:w-1/4 bg-gray-800/50 p-6 rounded-xl shadow-lg border border-gray-700 flex flex-col">
              <h3 class="text-xl font-bold text-gray-200 mb-4">é€‰æ‹©ä¸»é¢˜</h3>
              <select id="feeds-topic-selector" multiple class="w-full bg-gray-700 border border-gray-600 text-white"></select>
              <div class="mt-auto pt-4 border-t border-gray-700 text-gray-400 text-sm">é€‰æ‹©1-4ä¸ªä¸»é¢˜ï¼ŒæŸ¥çœ‹ç›¸å…³ä¿¡æ¯æµã€‚</div>
            </div>
            <!-- åŠ¨æ€ä¿¡æ¯æµçŸ©é˜µ -->
            <div id="feeds-matrix-container" class="lg:flex-1 grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6 min-h-[400px]">
              <div class="col-span-full flex items-center justify-center h-full bg-gray-900/50 rounded-xl text-gray-400 text-lg border border-gray-700">
                ğŸ‘‹ è¯·ä»å·¦ä¾§é€‰æ‹©ä¸»é¢˜ä»¥åŠ è½½ä¿¡æ¯æµã€‚
              </div>
            </div>
          </div>
        </div>

        <!-- ğŸ”¬ å®ä½“æµè§ˆå™¨ å†…å®¹é¢æ¿ -->
        <div id="explore-explorer-content" class="explore-tab-content hidden p-4 md:p-6 lg:p-8 bg-transparent">
          <div class="flex flex-col lg:flex-row gap-6 h-full">
            <!-- å®ä½“ç­›é€‰é¢æ¿ -->
            <div class="lg:w-1/4 bg-gray-800/50 p-6 rounded-xl shadow-lg border border-gray-700 flex flex-col">
              <h3 class="text-xl font-bold text-gray-200 mb-4">ç­›é€‰å®ä½“</h3>
              <div class="space-y-4">
                <div>
                  <label for="explorer-entity-type" class="block text-sm font-medium text-gray-400 mb-1">å®ä½“ç±»å‹</label>
                  <select id="explorer-entity-type" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                    <option value="">æ‰€æœ‰ç±»å‹</option>
                    <option value="Company">å…¬å¸</option>
                    <option value="Technology">æŠ€æœ¯</option>
                    <option value="Person">ä¸“å®¶/äººæ‰</option>
                    <option value="Research_Institution">ç ”ç©¶æœºæ„</option>
                    <option value="Product">äº§å“</option>
                  </select>
                </div>
                <div>
                  <label for="explorer-industry" class="block text-sm font-medium text-gray-400 mb-1">è¡Œä¸šåˆ†ç±»</label>
                  <input type="text" id="explorer-industry" placeholder="ä¾‹å¦‚ï¼šAIèŠ¯ç‰‡" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                </div>
                <div>
                  <label for="explorer-status" class="block text-sm font-medium text-gray-400 mb-1">æ´»è·ƒçŠ¶æ€</label>
                  <select id="explorer-status" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                    <option value="">æ‰€æœ‰çŠ¶æ€</option>
                    <option value="active">æ´»è·ƒ</option>
                    <option value="inactive">éæ´»è·ƒ</option>
                  </select>
                </div>
                <div>
                  <label for="explorer-location" class="block text-sm font-medium text-gray-400 mb-1">åœ°ç†ä½ç½®</label>
                  <input type="text" id="explorer-location" placeholder="ä¾‹å¦‚ï¼šç¡…è°·" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                </div>
                <div class="mt-6 flex justify-end gap-2">
                  <button id="explorer-reset-filter-btn" class="px-4 py-2 bg-gray-700 text-gray-200 rounded-md hover:bg-gray-600 transition">é‡ç½®</button>
                  <button id="explorer-apply-filter-btn" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 transition">åº”ç”¨ç­›é€‰</button>
                </div>
              </div>
            </div>
            <!-- å®ä½“åˆ—è¡¨ -->
            <div id="explorer-entity-list-container" class="lg:flex-1 bg-gray-800/50 p-6 rounded-xl shadow-lg border border-gray-700">
              <h3 class="text-xl font-bold text-gray-200 mb-4">å®ä½“åˆ—è¡¨</h3>
              <div id="explorer-entity-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="col-span-full text-center py-16 text-gray-400">
                  <i class="fa fa-search text-5xl mb-4"></i>
                  <p class="text-lg">è¯·ä½¿ç”¨å·¦ä¾§ç­›é€‰å™¨æŸ¥æ‰¾å®ä½“ã€‚</p>
                </div>
              </div>
              <div id="explorer-pagination" class="flex justify-center items-center mt-6 gap-2"></div>
            </div>
          </div>
        </div>
      </div>

          
      <!-- =================================================================== -->
      <!-- 4. åˆ†æä¸­å¿ƒé¡µé¢ (PAGE ANALYSIS)                                     -->
      <!-- =================================================================== -->
      <div id="page-analysis" class="page-container hidden">
        <!-- 1. é¡¶éƒ¨ç›®æ ‡æ  -->
        <div id="analysis-top-bar" class="p-4 border-b border-border-dark flex items-center bg-bg-dark text-text-light sticky top-[var(--header-height)] z-20">
          <span id="analysis-target-display" class="font-bold text-lg flex items-center">
            <!-- å†…å®¹å°†ç”±JSå¡«å…… -->
            <i class="fa fa-crosshairs mr-3 text-text-medium"></i>
            <span>åˆ†æç›®æ ‡ï¼š[è¯·ä»æ¢ç´¢é¡µæˆ–ä¸‹æ–¹é€‰æ‹©]</span>
          </span>
          <button id="analysis-target-switcher-btn" class="ml-4 px-4 py-1.5 bg-bg-soft-dark hover:bg-primary hover:text-white rounded-lg transition-colors text-text-light text-sm">
            <i class="fa fa-search mr-2"></i>åˆ‡æ¢/è®¾å®š
          </button>
        </div>

        <!-- 2. ä¸‰ç»´åˆ†æé€é•œ (Tab Navigation) -->
        <div class="border-b border-border-dark bg-bg-dark sticky top-[calc(var(--header-height)+65px)] z-20">
          <nav id="analysis-tabs" class="flex space-x-1 px-4">
            <a href="#" class="analysis-tab-link active px-6 py-4 font-semibold border-b-2 border-primary text-primary" data-tab="network-graph">
              <i class="fa fa-sitemap mr-2"></i>ğŸ•¸ï¸ å…³ç³»ç½‘ç»œ
            </a>
            <a href="#" class="analysis-tab-link px-6 py-4 font-semibold border-b-2 border-transparent text-text-medium" data-tab="evolution">
              <i class="fa fa-line-chart mr-2"></i>â³ æ¼”è¿›æ¨æ¼”
            </a>
            <a href="#" class="analysis-tab-link px-6 py-4 font-semibold border-b-2 border-transparent text-text-medium" data-tab="ecosystem">
              <i class="fa fa-globe mr-2"></i>ğŸ—ºï¸ ç”Ÿæ€ä½åˆ†æ
            </a>
          </nav>
        </div>

        <!-- 3. Tabå†…å®¹é¢æ¿ -->
        <div class="p-4 md:p-6 lg:p-8">
          <!-- å…³ç³»ç½‘ç»œ é¢æ¿ -->
          <div id="analysis-network-graph-content" class="analysis-tab-content">
            <div class="panel p-4 h-[calc(100vh-var(--header-height)-190px)] min-h-[600px] flex flex-col">
              <!-- é’»å–è·¯å¾„å¯¼èˆª -->
              <div id="graph-breadcrumb" class="flex-shrink-0 mb-3 text-sm text-text-medium"></div>
              <!-- ECharts å›¾è¡¨å®¹å™¨ -->
              <div id="analysis-graph-canvas" class="flex-grow w-full h-full"></div>
            </div>
          </div>
          <!-- æ¼”è¿›æ¨æ¼” é¢æ¿ -->
          <div id="analysis-evolution-content" class="analysis-tab-content hidden">
            <div class="panel p-6 min-h-[600px] flex flex-col items-center justify-center text-text-medium">
                <i class="fa fa-hourglass-half text-6xl text-text-dark mb-4"></i>
                <p class="text-xl font-semibold">æ¼”è¿›æ¨æ¼”åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...</p>
              </div>
          </div>
          <!-- ç”Ÿæ€ä½åˆ†æ é¢æ¿ -->
          <div id="analysis-ecosystem-content" class="analysis-tab-content hidden">
            <div class="panel p-6 min-h-[600px] flex flex-col items-center justify-center text-text-medium">
                <i class="fa fa-bullseye text-6xl text-text-dark mb-4"></i>
                <p class="text-xl font-semibold">ç”Ÿæ€ä½åˆ†æåŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...</p>
              </div>
          </div>
        </div>

        <!-- 4. å³ä¾§æ´å¯Ÿé¢æ¿ (Inspector) -->
        <div id="analysis-inspector-panel" class="fixed top-0 right-0 h-full w-[400px] bg-bg-dark border-l border-border-dark shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out z-40 flex flex-col">
          <!-- å†…å®¹å°†ç”±JSå¡«å…… -->
        </div>
        <div id="analysis-inspector-overlay" class="fixed inset-0 bg-black/60 hidden z-30"></div>
      </div>

      <!-- =================================================================== -->
      <!-- 5. æˆæœä¸­å¿ƒé¡µé¢ (PAGE FINDINGS)                                     -->
      <!-- =================================================================== -->
      <div id="page-findings" class="page-container hidden">
        <div class="flex flex-col md:flex-row gap-6 p-4 md:p-6 lg:p-8">
          <!-- 1. å·¦ä¾§æˆæœç±»å‹å¯¼èˆª -->
          <aside class="w-full md:w-64 flex-shrink-0 bg-bg-dark border-r border-border-dark p-4">
            <h3 class="font-bold text-lg mb-4 text-text-light px-2">ç ”ç©¶å·¥ä½œå°</h3>
            <nav id="findings-nav" class="space-y-1">
              
              <!-- 1. æŠ€æœ¯çº¿ç´¢ -->
              <a href="#" class="findings-nav-link active" data-tab="tech_leads" data-apitype="insights">
                <i class="fa fa-lightbulb-o fa-fw mr-3"></i><span>æŠ€æœ¯çº¿ç´¢</span>
              </a>
              
              <!-- 2. ä¸“é¢˜æŠ¥å‘Š (åŸâ€œå†å²æŠ¥å‘Šâ€) -->
              <a href="#" class="findings-nav-link" data-tab="topic_reports" data-apitype="reports">
                <i class="fa fa-file-text-o fa-fw mr-3"></i><span>ä¸“é¢˜æŠ¥å‘Š</span>
              </a>

              <!-- 3. å®ä½“æ—¶é—´è½´ -->
              <a href="#" class="findings-nav-link" data-tab="entity_timeline">
                <i class="fa fa-calendar-times-o fa-fw mr-3"></i><span>å®ä½“æ—¶é—´è½´</span>
              </a>
              
              <!-- 4. åˆ†æå¿«ç…§ -->
              <a href="#" class="findings-nav-link" data-tab="snapshots" data-apitype="snapshots">
                <i class="fa fa-camera fa-fw mr-3"></i><span>åˆ†æå¿«ç…§</span>
              </a>

              <!-- 5. ä¾‹è¡ŒæŠ¥å‘Š (æ–°) -->
              <a href="#" class="findings-nav-link" data-tab="routine_reports">
                  <i class="fa fa-clock-o fa-fw mr-3"></i><span>ä¾‹è¡ŒæŠ¥å‘Š</span>
              </a>

            </nav>
          </aside>

          <!-- 2. å³ä¾§ä¸»å†…å®¹åŒº -->
          <main id="findings-main-content" class="flex-1 p-6 overflow-y-auto">
            <!-- å†…å®¹å°†ç”± JS åŠ¨æ€å¡«å…… -->
            <div class="text-center text-text-medium py-16">
                <i class="fa fa-spinner fa-spin text-3xl"></i>
            </div>
          </main>
        </div>
        
        <!-- 3. æˆæœè¯¦æƒ…ä¾§è¾¹é¢æ¿ -->
        <div id="findings-inspector-panel" class="fixed top-0 right-0 h-full w-full max-w-2xl bg-bg-dark border-l border-border-dark shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out z-40 flex flex-col">
          <!-- è¯¦æƒ…å†…å®¹å°†ç”±JSåŠ¨æ€å¡«å…… -->
        </div>
        <div id="findings-inspector-overlay" class="fixed inset-0 bg-black/60 hidden z-30"></div>
      </div>

      <!-- æ–°å¢ï¼šåˆ›å»º/ç¼–è¾‘ä¸“é¢˜æŠ¥å‘Šçš„æ¨¡æ€æ¡† -->
      <div id="report-editor-modal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
          <div class="panel w-full max-w-4xl h-[90vh] flex flex-col p-0">
              <div class="flex justify-between items-center p-4 border-b border-border-dark">
                  <h3 class="text-lg font-bold text-text-light">åˆ›å»º/ç¼–è¾‘ä¸“é¢˜æŠ¥å‘Š</h3>
                  <button id="close-report-editor-btn" class="text-text-medium hover:text-white text-2xl">&times;</button>
              </div>
              <div class="flex-grow p-6 overflow-y-auto">
                  <input type="text" id="report-title-input" placeholder="è¾“å…¥æŠ¥å‘Šæ ‡é¢˜..." class="input-dark w-full text-2xl font-bold mb-6">
                  <div id="report-block-editor" class="prose prose-invert max-w-none">
                      <!-- å—ç¼–è¾‘å™¨å†…å®¹ -->
                  </div>
              </div>
              <div class="p-4 bg-bg-deep-dark border-t border-border-dark flex justify-end gap-3">
                  <button class="btn-secondary">ä¿å­˜è‰ç¨¿</button>
                  <button class="btn-primary">å‘å¸ƒæŠ¥å‘Š</button>
              </div>
          </div>
      </div>

      <!-- =================================================================== -->
      <!-- 6. AI Copilot é¡µé¢ (PAGE COPILOT)                                   -->
      <!-- =================================================================== -->
      <div id="page-copilot" class="page-container hidden">
        <div class="p-4 md:p-6 lg:p-8">
          <div class="panel p-6 md:p-8">
            <h2 class="text-2xl font-bold mb-6 text-text-light">AI Copilot æ·±åº¦ç ”ç©¶</h2>
            
            <div class="space-y-6">
              <!-- 1. ç ”ç©¶æŸ¥è¯¢è¾“å…¥åŒº -->
              <div class="flex flex-col md:flex-row gap-4 items-start">
                <div class="flex-grow w-full">
                  <label for="research-query" class="block text-sm font-medium text-text-medium mb-1">è¾“å…¥æ‚¨çš„ç ”ç©¶æŸ¥è¯¢ï¼š</label>
                  <textarea id="research-query" 
                            class="input-dark w-full text-base" 
                            placeholder="ä¾‹å¦‚ï¼šåˆ†æä¸€ä¸‹NVIDIAåœ¨AIèŠ¯ç‰‡é¢†åŸŸçš„æŠ¤åŸæ²³æœ‰å¤šæ·±ï¼Œå¹¶å¯¹æ¯”å…¶ä¸Cerebrasåœ¨æŠ€æœ¯è·¯çº¿ä¸Šçš„ä¸»è¦å·®å¼‚å’Œæ½œåœ¨é£é™©..." 
                            rows="3"></textarea>
                </div>
                <button id="perform-research-btn" class="btn-primary w-full md:w-auto mt-0 md:mt-7 flex-shrink-0">
                  <i class="fa fa-flask mr-2"></i>å¼€å§‹æ·±åº¦ç ”ç©¶
                </button>
              </div>

              <!-- 2. ç ”ç©¶æŠ¥å‘Šå±•ç¤ºåŒº -->
              <div class="bg-bg-deep-dark p-6 rounded-lg border border-border-dark min-h-[400px] relative">
                <h3 class="text-xl font-semibold mb-4 text-text-light flex items-center">
                  <i class="fa fa-file-text-o text-primary mr-3"></i>ç ”ç©¶æŠ¥å‘Š
                </h3>
                <div id="research-results-display" class="prose prose-invert max-w-none text-text-light">
                  <p class="text-text-medium">åœ¨æ­¤è¾“å…¥æ‚¨çš„ç ”ç©¶æŸ¥è¯¢ï¼ŒAI Copilot å°†ä¸ºæ‚¨ç”Ÿæˆä¸€ä»½åŒ…å«å›¾æ–‡å’Œæ•°æ®çš„æ·±åº¦åˆ†ææŠ¥å‘Šã€‚</p>
                </div>
                <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
                <div id="research-loading-overlay" class="absolute inset-0 bg-bg-deep-dark/80 backdrop-blur-sm flex-col items-center justify-center hidden rounded-lg">
                    <div class="loader-dots mb-4">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                    <p id="research-status-text" class="text-primary text-lg font-medium"></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- =================================================================== -->
      <!-- 7. ç³»ç»Ÿä¸­å¿ƒé¡µé¢ (PAGE SYSTEM)                                     -->
      <!-- =================================================================== -->
      <div id="page-system" class="page-container hidden">
        <div class="p-4 md:p-6 lg:p-8">
          <h2 class="text-2xl font-bold mb-6 text-text-light">ç³»ç»Ÿæ§åˆ¶é¢æ¿</h2>
          <!-- å¡ç‰‡å¼ç½‘æ ¼å¸ƒå±€ -->
          <div id="system-cards-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- ç³»ç»Ÿç®¡ç†å¡ç‰‡å°†ç”±JSåŠ¨æ€å¡«å…… -->
          </div>
        </div>
      </div>

      <!-- æ–°å¢ï¼šé€šç”¨çš„é…ç½®ç®¡ç†æ¨¡æ€æ¡† -->
      <div id="management-modal" class="fixed inset-0 bg-black/60 z-50 hidden items-center justify-center p-4">
        <div class="panel w-full max-w-4xl h-[90vh] flex flex-col p-0">
          <!-- Modal Header -->
          <div class="flex justify-between items-center p-4 border-b border-border-dark flex-shrink-0">
            <h3 id="modal-title" class="text-lg font-bold text-text-light">ç®¡ç†</h3>
            <button id="close-management-modal" class="text-text-medium hover:text-white text-2xl">&times;</button>
          </div>
          <!-- Modal Body -->
          <div class="p-6 flex-grow overflow-y-auto">
            <!-- è¡¨æ ¼å’Œè¡¨å•å°†ç”±JSåŠ¨æ€å¡«å…… -->
            <div id="modal-content-area"></div>
          </div>
        </div>
      </div>

      <!-- å…³é”®ä¿®æ”¹ï¼šå°†ä¾§è¾¹æ çš„ DOM ç»“æ„ç§»åŠ¨åˆ°è¿™é‡Œï¼Œä½œä¸ºå…¨å±€ç»„ä»¶ -->
      <div id="dashboard-side-panel" class="fixed top-0 right-0 h-full w-full md:w-[420px] bg-white dark:bg-bg-dark shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50"></div>
      <div id="side-panel-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40"></div>
      <!-- ç»“æŸä¿®æ”¹ -->
    </div>

    <!-- ============================================================ -->
    <!-- ============= å…¨å±€è¯¦æƒ…å±•ç¤ºæ¨¡æ€æ¡† (MODAL) ================= -->
    <!-- ============================================================ -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
      <div class="bg-gray-900 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
        <!-- Modal Header -->
        <div class="flex justify-between items-center p-4 border-b border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <h3 id="modalTitle" class="text-xl font-semibold text-gray-200">æ•°æ®è¯¦æƒ…</h3> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <button class="close-button text-gray-400 hover:text-gray-200 text-2xl">&times;</button> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
        </div>

        <!-- Modal Body -->
        <div class="p-6 overflow-y-auto text-gray-300"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <div id="noDataMessage" class="text-center text-gray-500 py-8 hidden">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ•°æ®ã€‚</div> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <div class="overflow-x-auto">
              <table id="detailTable" class="w-full divide-y divide-gray-700 table-fixed"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
                <!-- thead and tbody will be generated by JS -->
              </table>
          </div>
        </div>

        <!-- Modal Footer (for pagination, if needed later) -->
        <div class="modal-footer flex justify-between items-center p-4 border-t border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <span id="paginationInfo" class="text-sm text-gray-400"></span> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <div>
            <button id="prevPageBtn" class="px-4 py-2 bg-gray-700 text-gray-200 rounded-md hover:bg-gray-600 disabled:opacity-50">ä¸Šä¸€é¡µ</button> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
            <button id="nextPageBtn" class="px-4 py-2 bg-gray-700 text-gray-200 rounded-md hover:bg-gray-600 disabled:opacity-50 ml-2">ä¸‹ä¸€é¡µ</button> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          </div>
        </div>
      </div>
    </div>
        <!-- ============= å†å²è®°å½•è¯¦æƒ…ä¸“ç”¨æ¨¡æ€æ¡† ================= -->
    <div id="historyDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
      <div class="bg-gray-900 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
        <div class="flex justify-between items-center p-4 border-b border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <h3 id="historyModalTitle" class="text-xl font-semibold text-gray-200">ä»»åŠ¡è¯¦æƒ…</h3> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <button class="close-button text-gray-400 hover:text-gray-200 text-2xl">&times;</button> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
        </div>
        <div id="historyModalBody" class="p-6 overflow-y-auto text-gray-300"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <!-- å†…å®¹å°†ç”±JSå¡«å…… -->
        </div>
      </div>
    </div>

    <!-- å…¨å±€Toasté€šçŸ¥å®¹å™¨ -->
    <div id="toast-notification" class="fixed top-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-[100]">
      <p id="toast-message">æ“ä½œæˆåŠŸï¼</p>
    </div>

    <div id="user-modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50" style="display:none;">
      <div class="bg-gray-900 rounded-2xl shadow-xl w-full max-w-lg flex flex-col border border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
        <div class="flex justify-between items-center p-4 border-b border-gray-700"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <h3 class="text-xl font-bold text-gray-200">ä¸ªäººä¸­å¿ƒ</h3> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <button id="close-user-modal" class="text-gray-400 hover:text-gray-200 text-2xl font-bold">&times;</button> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
        </div>
        <div class="p-6 text-gray-200"> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          <div class="mb-6">
            <div id="user-modal-display-name" class="font-semibold text-lg text-primary"></div>
            <div id="user-modal-email" class="text-gray-400 text-sm"></div> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          </div>
          <div class="mb-4">
            <label class="block mb-2 font-medium text-gray-400">å…³æ³¨æŠ€æœ¯é¢†åŸŸ</label> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
            <select id="user-modal-tech-select" multiple class="w-full bg-gray-700 border border-gray-600 text-white"></select> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          </div>
          <div class="mb-4">
            <label class="block mb-2 font-medium text-gray-400">å…³æ³¨æ ‡æ†ä¼ä¸š</label> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
            <select id="user-modal-company-select" multiple class="w-full bg-gray-700 border border-gray-600 text-white"></select> <!-- âœ… é€‚åº”æ·±è‰²èƒŒæ™¯ -->
          </div>
          <div class="flex justify-end">
            <button id="save-user-focus" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-700">ä¿å­˜å…³æ³¨</button>
          </div>
        </div>
      </div>
    </div>

    <!-- =================================================================== -->
    <!-- å…¨å±€æ¨¡æ€æ¡† (MODALS)                                                 -->
    <!-- =================================================================== -->
    <div id="target-switcher-modal" class="fixed inset-0 bg-black/60 z-50 hidden items-center justify-center p-4">
      <div class="panel w-full max-w-lg p-0 flex flex-col">
        <!-- Modal Header -->
        <div class="flex justify-between items-center p-4 border-b border-border-dark flex-shrink-0">
          <h3 class="text-lg font-bold text-text-light">åˆ‡æ¢åˆ†æç›®æ ‡</h3>
          <button id="close-target-switcher-modal" class="text-text-medium hover:text-white text-2xl">&times;</button>
        </div>
        <!-- Modal Body -->
        <div class="p-6 overflow-y-auto space-y-6">
          <div>
            <label for="entity-search-input" class="block text-sm font-medium text-text-medium mb-2">æœç´¢å®ä½“ (å…¬å¸ã€æŠ€æœ¯ç­‰)</label>
            <select id="entity-search-input" placeholder="è¾“å…¥åç§°è¿›è¡Œæœç´¢..."></select>
          </div>
          <div>
            <h4 class="text-sm font-medium text-text-medium mb-2">æˆ–ä»æˆ‘çš„å…³æ³¨ä¸­é€‰æ‹©</h4>
            <div id="my-focus-list-container" class="space-y-2 max-h-48 overflow-y-auto">
              <!-- â€œæˆ‘çš„å…³æ³¨â€åˆ—è¡¨å°†ç”±JSåŠ¨æ€å¡«å…… -->
              <p class="text-text-dark">æ­£åœ¨åŠ è½½å…³æ³¨åˆ—è¡¨...</p>
            </div>
          </div>
        </div>
        <!-- Modal Footer -->
        <div class="p-4 bg-bg-deep-dark border-t border-border-dark flex-shrink-0 text-right">
          <button id="confirm-target-switch-btn" class="btn-primary" disabled>ç¡®è®¤åˆ‡æ¢</button>
        </div>
      </div>
    </div>

  </main>

<!-- =============================================================== -->
<!-- ======== LOCAL DEVELOPMENT SCRIPT LOADER (FINAL VERSION) ======== -->
<!-- =============================================================== -->
<script>
    window.IS_LOCAL_ENV = true; 
    console.log('%c[DEV_MODE] Local environment activated. API calls will be mocked.', 'color: white; background-color: #2c3e50; padding: 4px; border-radius: 4px;');
    // å…³é”®ä¿®æ”¹ï¼šåœ¨æœ¬åœ°å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¹Ÿæœ€å…ˆå®šä¹‰ App å¯¹è±¡
    const App = {};
    console.log('Initial App object created for local dev.');

    function includeAndExecute(path) {
      return new Promise(async (resolve, reject) => {
        try {
          const response = await fetch(path);
          if (!response.ok) throw new Error(`Failed to fetch ${path}: ${response.statusText}`);
          const htmlContent = await response.text();
          const scriptTagMatch = htmlContent.match(/<script>([\s\S]*?)<\/script>/);
          if (scriptTagMatch && scriptTagMatch[1]) {
            const scriptElement = document.createElement('script');
            scriptElement.textContent = scriptTagMatch[1];
            document.head.appendChild(scriptElement);
          }
          resolve();
        } catch (error) { reject(error); }
      });
    }

    (async () => {
      const scriptsToLoad = [
        'frontend/state_api.js.html', 'frontend/config.js.html', 'frontend/utils.js.html',
        'frontend/ui_utils.js.html',  'frontend/mock_api.js.html', 
        'frontend/page_home.js.html', 'frontend/page_exploration.js.html', 'frontend/page_analysis.js.html',
        'frontend/page_findings.js.html', 'frontend/page_copilots.js.html',
        'frontend/page_system.js.html', 'frontend/main.js.html'
      ];
      console.log('[DEV_MODE] Starting sequential script loading...');
      try {
        for (const scriptPath of scriptsToLoad) {
          await includeAndExecute(scriptPath);
          console.log(`[DEV_MODE] ... loaded ${scriptPath}`);
        }
        console.log('[DEV_MODE] All scripts loaded.');
        
        // åœ¨æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæ¯•åï¼Œæ‰‹åŠ¨è°ƒç”¨åˆå§‹åŒ–å‡½æ•°
        App.init(); 
      } catch (error) {
        console.error("Critical error during script loading sequence.", error);
        document.getElementById('loader').innerHTML = `<p class="text-red-500">è„šæœ¬åŠ è½½å¤±è´¥: ${error.message}</p>`;
      }
    })();
</script>

</body>
</html>